box: node
build:
    steps:
        - npm-install
        - script:
            name: gitbook install
            code: |
                echo "node version $(node -v) running"
                echo "npm version $(npm -v) running"
                npm i gitbook-cli
                node_modules/gitbook-cli/bin/gitbook.js install .
                node_modules/gitbook-cli/bin/gitbook.js build .

                echo 'node_modules/' > .gitignore
                echo 'npm-debug.log' >> .gitignore

deploy:
    steps:
        - install-packages:
            packages: git ssh-client
        - add-ssh-key:
            keyname: GH_PAGES_DEPLOY_SSHKEY
        - add-to-known_hosts:
            hostname: github.com
            fingerprint: 23:0d:c8:00:ff:bd:b8:77:1b:ac:48:09:68:72:69:27
        - gsserge/git-push@0.7.19:
            host: github.com
            gh_pages: true
            gh_pages_domain: lowzj.com
            basedir: _book


